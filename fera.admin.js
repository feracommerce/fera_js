Fera.AdminElementSelector=function(p){var t=this;p=p||{};var i,r,f=Fera.Util.$(),o=p.closeAfter,s=p.elementHeight||"15px",c=p.elementDisplayType||"block",m=p.elementMinWidth||150,l=[],d=[],e=function(){a(),n(),t.running=!0,t.stopped=!1},a=function(){var a,n=20;f("body","*").on("mousemove",function(e){t.running&&(10<(n+=1)&&(P(e),n=0),a&&clearTimeout(a),a=setTimeout(function(){n=20},100))}),f("body","*").on("click",function(e){if(t.running&&!t.stopped){var a=e||window.event;a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),null!=a.cancelBubble&&(a.cancelBubble=!0);var n=f(".fera-highlight");n.hasClass("fera-highlight-invalid")?alert("This element cannot be used as an integration point because it does not have a specific enough class or ID. Please contact your developer or the Fera support team for help with modifying your store's content if you really want it at this location."):(i||g(n),h())}}),f(document).on("keyup keydown",function(e){var a=e.keyCode||e.which;t.stopped||27!==a||(alert("Aborting element selector because you pressed the escape key. You may now close this window."),t.pause(),t.stopped=!0),16===a&&("keydown"===e.type?t.pause():(t.resume(),P(e)))})},u=function(e){for(var a=e.attr("class").split(" "),n=[],t=0;t<a.length;t++)a[t]&&-1===a[t].indexOf("fera-")&&""!==a[t]&&n.push(a[t]);return e.attr("class",n.join(" ")),e};t.pause=function(){t.running=!1,u(f(".fera-highlight"))},t.resume=function(){t.running=!0};var h=function(){var e=function(){alert("Failed to select element. Please contact the Fera support team for help."),window.close()},a=f(f(i)[0].outerHTML);u(a);var n={admin_session:p.adminSessionToken,css_path:i,position:r,html:a[0].outerHTML.replace(/ class="\s?"/,"").replace(/\n\n+/g,"\n").trim(),recommended_classes:l,recommended_styles:d};f.ajax({method:"POST",type:"POST",data:n,url:p.apiUrl,dataType:"json",success:function(){o&&window.close()},error:e}),setTimeout(e,3e4),t.running=!1,f("body").addClass("fera-load-waiting")},n=function(){var e='<style> .fera-highlight{ cursor: crosshair !important; } .fera-highlight.fera-highlight-invalid{ cursor: not-allowed !important; outline: 1px solid red !important; } body.fera-load-waiting::after {content: "";background-color: rgba(255, 255, 255, 0.5);position: fixed;left: 0;top: 0;right: 0;bottom: 0;z-index: 99999999;}';if(p.chooseLocation){var a=parseInt(s.replace("px",""));a=150<a?150:a;var n=Math.max((a-15)/2,2)+"px";e+="[data-fera-skill] { opacity: 0.3; cursor: not-allowed; } .fera-highlight{ outline: 1px solid #0000ff24 !important; } .fera-highlight-placeholder { padding-top: "+n+" !important; padding-bottom: "+n+" !important; text-align: center !important;\nwidth: 100% !important;\nfont-weight: bold !important;\ncolor: black !important;\ndisplay: block !important;\nbackground-color: #f0f2ff !important;\nborder: 4px dashed #1800ff !important;\ntext-transform: uppercase !important;\nz-index: 9 !important;\nposition: relative !important;\nmargin-left: auto !important;\nmargin-right: auto !important;\nfont-size: 16px !important;\n} "}else e+=".fera-highlight{ outline: 2px solid #0000ff !important; } .fera-highlight.btn:not(.disabled):hover::after { border: none !important; }";e+="</style>",f("body").append(e)},g=function(e,a){var n;a=a||" ";var t=e.get(0).tagName;if(-1!==["TR","THEAD","TFOOT","TBODY"].indexOf(t))return null;if(e.width()<m)return null;if("flex"===e.parent().css("display"))return null;var i=function(e){return 1===f(a+e).length};if(e.data("fera-skill")||0<e.parents("[data-fera-skill]").length)return null;if(e.attr("id")&&(e.attr("id")&&i("#"+e.attr("id"))&&!e.attr("id").match(/product[_\-.][0-9a-z]+/i)))return n=a+"#"+e.attr("id");if(e.data("section-id"))return n='[data-section-id="'+e.data("section-id")+'"]';if("FORM"===t&&e.attr("action")){var r='form[action="'+e.attr("action")+'"]';if(i(r))return n=a+r}if(e.attr("class"))for(var o=e.attr("class").replace(/\s\s+/gm," ").trim().split(" "),s=0;s<o.length;s++){var l=o[s];if(-1===l.indexOf("fera-highlight")&&i("."+l))return n=a+"."+l}if(i(t))return n=a+t.toLowerCase();var d=new Fera.CssPathGenerator(e.get(0),{skipDataAttributes:!0,skipAttributes:!0});return i(n=d.getPath())?a+n:i(n=(d=new Fera.CssPathGenerator(e.get(0),{skipAttributes:!0,maxDataAttrSize:60})).getPath())?a+n:null},v=function(){f(".fera-highlight").removeClass("fera-highlight fera-highlight-prepend_to fera-highlight-append_to fera-highlight-invalid fera-highlight-after fera-highlight-before fera-highlight-left fera-highlight-right")},w=function(e,a){var n=a.css("display"),t=-1===["table-cell","table-row","li"].indexOf(n);-1!==["table-cell","table-row"].indexOf(n)&&(t=!1);var i=!0;"block"===c&&p.chooseLocation&&(-1!==["inline-block","inline","flex"].indexOf(n)&&(i=!1),-1!==["H1","H2","H3","H4","H5","H6","P","A","TABLE","SVG","IMG"].indexOf(a[0].tagName)&&(i=!1)),a.is(".slideshow,.slick-slider")&&(i=!1);var r=a.height()/4,o=e.offsetY>=2*r,s=(e.offsetY,e.offsetY>=3*r),l=e.offsetY>=2*r&&e.offsetY<3*r,d=e.offsetY>=r&&e.offsetY<2*r;e.offsetY;return t&&s?"after":i&&(t&&l||!t&&o)?"append_to":i&&d||!t?"prepend_to":"before"},x=function(e,a){-1!==["after","before"].indexOf(a)&&-1!==["left","right"].indexOf(e.css("float"))?d.push("float: "+e.css("float")):-1!==["prepend_to","append_to"].indexOf(a)&&-1!==["left","right"].indexOf(e.children(":not(.fera-highlight-placeholder)").css("float"))&&d.push("float: "+e.children(":not(.fera-highlight-placeholder)").css("float")),e.hasClass("container")&&l.push("container");var n=parseInt(e.css("padding-bottom"));n&&0<n&&"after"===a&&d.push("margin-bottom: "+e.css("padding-bottom"));var t=parseInt(e.css("padding-top"));t&&0<t&&"before"===a&&d.push("margin-top: "+e.css("padding-top"));var i=parseInt(e.css("margin-bottom"));i&&0<i&&"after"===a&&d.push("margin-bottom: "+e.css("margin-bottom"));var r=parseInt(e.css("margin-top"));r&&0<r&&"before"===a&&d.push("margin-top: "+e.css("margin-top"))},b=function(){if(p.chooseLocation){var e=f("<div>INSERT HERE</div>");e.attr("style",d.join(" !important; ")),e.attr("class","fera-highlight-placeholder "+l.join(" ")),e.insertBefore(".fera-highlight-before"),e.insertAfter(".fera-highlight-after"),e.prependTo(".fera-highlight-prepend_to"),e.appendTo(".fera-highlight-append_to")}},P=function(e){var a=f(e.target);if(a.hasClass("fera-highlight-placeholder"))return!1;f(".fera-highlight-placeholder").remove();var n=g(a);if(!n){var t=a.parents("div[id]");(n=g(a,"#"+t.first().attr("id")+" "))&&(a=f(n))}if(0<a.parents(".slideshow,.slick-slider").length&&(a=a.parents(".slideshow,.slick-slider").first()),v(),d=[],l=[],a.addClass("fera-highlight"),null===n)return a.addClass("fera-highlight-invalid"),i=r=null,!1;r=w(e,a),a.addClass("fera-highlight-"+r),p.chooseLocation&&x(a,r),i=n,b()};e()},Fera.AdminIntegrationChecker=function(e){e=e||{};var a=this,t=Fera.Util.$();a.check=function(e){var a="==== YOUR CUSTOMERS WILL >>NOT<< SEE THIS MESSAGE ====\n\n",n="Please contact our support team at help@fera.ai and someone will be able to help you get it working.";"product_list"==e&&0==t('.banana-container[data-container_type="list"]').length&&alert(a+"It doesn't look like Fera is integrated properly into your list/grid/collection pages. "+n)}},Fera.AdminPanel=function(t){this.version="1.0.10.1";var i=this;t=t||{};var e,a,n,r,o=Fera.Util.$(),s=!1,l=function(){t.logger.log("~~ Loaded fera.admin.js version "+i.version+" ~~")};i.initHelpers=function(){e=t.containers,a=t.markAllContainersAsDirtyCallback,O(),g(),v(),S(),T(),w(),x(),_(),F(),U(),C(),b(),P(),y(),setInterval(y,1e3),k(),f(),d(),i.previewer=new Fera.AdminPreviewer(t)};var d=function(){if(t.optionsParser.urlParams.show_element_selector){var e={elementHeight:t.optionsParser.urlParams.fera_element_height,adminSessionToken:t.adminSessionToken,apiUrl:t.optionsParser.urlParams.api_url,chooseLocation:t.optionsParser.hasUrlFlag("choose_location"),closeAfter:t.optionsParser.hasUrlFlag("fera_close_after"),api:t.api};new Fera.AdminElementSelector(e)}};i.showPreviewMessage=function(e){p()&&n.html(": "+e)};var p=function(){return t.optionsParser.getPreviewId()},f=function(){if(p()&&0===o("#feraPreviewModeIndicator").length){var e=".fera-preview-mode-indicator-container {\n  height: 0;\n  width: 0;\n}\n.fera-preview-mode-indicator {\n  z-index: 99999999999;\n  position: fixed;\n  top: 0;\n  left: 0;\n  background-color: white;\n  color: #ff3500;\n  border: 12px solid #f44714;\n  padding: 18px 60px;\n  vertical-align: middle;\n  box-shadow: 0px 0px 20px #00000014;\n  cursor: grabbing;\n}\n.fera-preview-mode-indicator.draggable { cursor: grabbing; } \n.fera-preview-mode-indicator img {\n  max-height: 22px;\n  display: inline-block;\n  vertical-align: middle;\n}\n.fera-preview-mode-indicator #adminPreviewModeMainCaption {\n  height: 24px;\n  display: inline-block;\n  vertical-align: middle;\n  line-height: unset;\n  margin-left: 12px;\n  font-weight: bold;\n  letter-spacing: 1px;\n  text-transform: uppercase;}\n.fera-preview-mode-indicator:hover a.close-preview {\n    display: block;\n}\n\n.fera-preview-mode-indicator .close-preview {\n  position: absolute;\n  right: 4px;\n  top: 2px;\n  font-size: 10px;\n  text-transform: uppercase;\n  color: #ff3500;\n  text-decoration-color: #ff35003d;\n}@media(max-width: 500px) {\n .fera-preview-mode-indicator #adminPreviewModeMessage,\n .fera-preview-mode-indicator #adminPreviewModeMainCaption {\n     display: none;\n }  \n .fera-preview-mode-indicator {\n     padding: 4px;\n     border-width: 2px;\n } \n  .fera-preview-mode-indicator .close-preview {\n      background-color: white;\n      font-size: 8px;\n      position: relative;\n      left: 0;\n  }\n}";r=o('<div id="feraPreviewModeIndicator" class="fera-preview-mode-indicator"><img src="'+t.api.baseCdnPath+'/img/branding/logo_icon.png" alt="Fera.ai Admin Preview"><span id="adminPreviewModeMainCaption">Skill Preview Mode</span><a class="close-preview" href="#">close preview</a><span id="adminPreviewModeMessage"></span><style>'+e+"</style></div>"),o("body").prepend(r),n=r.find("#adminPreviewModeMessage"),r.find(".close-preview").on("click",function(e){e.preventDefault(),c()}),m(),u(),o("#admin-bar-iframe").hide()}},c=function(){var e=window.location.toString();return e=Fera.Util.updateURLParameter(e,"fera_preview",null),e=Fera.Util.updateURLParameter(e,"fera_test",null),e=Fera.Util.updateURLParameter(e,"fera_admin",null),e=Fera.Util.updateURLParameter(e,"test_mode",null),e=Fera.Util.updateURLParameter(e,"admin_mode",null),e=Fera.Util.updateURLParameter(e,"preview",null),e=Fera.Util.updateURLParameter(e,"fera",null),window.location=e,!0},m=function(){o("a").each(function(){var e=o(this);if(!e.data("fera-preview-links-added")){var a=e.attr("href");"string"==typeof a&&""!==a&&0!==a.indexOf("#")&&(a=Fera.Util.updateURLParameter(a,"fera_test",t.testMode),a=Fera.Util.updateURLParameter(a,"fera_admin",t.adminMode),a=Fera.Util.updateURLParameter(a,"fera_preview",t.optionsParser.getPreviewId()),e.data("fera-preview-links-added",!0),e.attr("href",a))}})},u=function(){var a=r.width(),n=r.height(),t=null;r.on("mousedown",function(e){"close-preview"!==o(e.target).attr("class")&&(r.attr("unselectable","on").addClass("draggable"),t=r)}).on("mouseup",function(){t=null,r.removeAttr("unselectable").removeClass("draggable")}),o("body").on("mousemove",function(e){t&&t.offset({top:e.pageY-n/2,left:e.pageX-a/2})})},h=function(){s?(i.$panel.hide(),s=!1):(i.$panel.show(),s=!0)},g=function(){o("#feraAdminPanelToggle").on("change",function(e){e.preventDefault(),h()})},v=function(){i.$panel.find("#feraAdminPanel--hide").on("click",function(e){e.preventDefault(),o("#feraAdminPanelToggle").click()})},w=function(){i.$panel.find("#feraAdminPanel--clearShownHistoryHelp").on("click",function(e){return e.preventDefault(),alert('Fera only shows each social proof event (eg. "Someone has started buying X item") ONCE per customer.\n\nUse this action to clear Fera\'s "seen" history and re-display any shown social proof events for testing purposes.\n\nNote: Clearing of notifications will remain active until you switch to another page.'),!1})},x=function(){i.$panel.find("#feraAdminPanel--clearShownHistory").on("click",function(e){return e.preventDefault(),t.app.trigger("feeds.reset"),window.location=Fera.Util.updateURLParameter(window.location.toString(),"clear_notification_history",1),!1})},b=function(){i.$panel.find("#feraAdminPanel--numContainersHelp").on("click",function(e){return e.preventDefault(),alert("This shows you the number of Fera containers located on this page. The Fera containers are what show Fera content embedded within your pages. \n\nIf you're expecting to see Fera embedded content ON THIS PAGE but you're not seeing anything and this number is 0, that probably means Fera is not properly integrated into your store's theme. Please follow our integration guides or seek help from one of our support staff to get integration working on your store."),!1}),i.$panel.find("#feraAdminPanel--numContainersValue").text(e.size())},P=function(){i.$panel.find("#feraAdminPanel--sessionTimeHelp").on("click",function(e){return e.preventDefault(),alert("Shows how much time the user spent on site during the current session. Session resets after 1 hours of inactivity."),!1}),i.$panel.find("#feraAdminPanel--timeSinceFirstSeenHelp").on("click",function(e){return e.preventDefault(),alert("Shows how much time has passed since the user first visited the site (including any time in the past). This timer never resets (unless the shoppers session is lost)."),!1}),i.$panel.find("#feraAdminPanel--timeOnCurrentPageHelp").on("click",function(e){return e.preventDefault(),alert("Shows how much time the user spent on current page. This timer resets after the shopper navigates to any other page."),!1})},y=function(){t.timeTracker&&(i.$panel.find("#feraAdminPanel--sessionTimeValue").text(A(t.timeTracker.getSessionTime())),i.$panel.find("#feraAdminPanel--timeSinceFirstSeenValue").text(A(t.timeTracker.getTimeSinceFirstSeen())),i.$panel.find("#feraAdminPanel--timeOnCurrentPageValue").text(A(t.timeTracker.getTimeOnCurrentPage())),i.$panel.find("#feraAdminPanel--inactiveTimeOnCurrentPageValue").text(A(t.timeTracker.getInactiveTimeOnPage())))},k=function(){(i.$panel.find("#feraAdminPanel--resetUserTimersHelp").on("click",function(e){return e.preventDefault(),alert("Resets all timers: Session Time, Time on Current Page and Time Since 1st Seen."),!1}),t.timeTracker)&&i.$panel.find("#feraAdminPanel--resetUserTimers").on("click",function(e){return e.preventDefault(),t.timeTracker.reset(),a&&a(),y(),!1})},A=function(e){var a=e%60,n=(e=(e-a)/60)%60,t=(e-n)/60,i="";return 0<t&&(i+=t+"h "),(0<n||0<t)&&(i+=n+"min "),t<=0&&(i+=a+"sec "),i},T=function(){i.$panel.find("#feraAdminPanel--testModeHelp").on("click",function(e){return e.preventDefault(),alert("Test Mode allows admins to preview in-store campaigns using test data from our server. This is useful for you to see how a busy store will look to visitors."),!1})},S=function(){var e=i.$panel.find("#feraAdminPanel--toggleTestMode");t.testMode?e.checked=!0:e.checked=!1,e.on("change",function(e){e.preventDefault();var a=window.location.toString();return-1!==a.indexOf("fera_test")?-1!==(a=Fera.Util.updateURLParameter(a,"fera_test",t.testMode?0:1)).indexOf("test_mode")&&(a=Fera.Util.updateURLParameter(a,"test_mode",null)):a=Fera.Util.updateURLParameter(a,"fera_test",t.testMode?0:1),window.location=a,!1})},F=function(){i.$panel.find("#feraAdminPanel--resetHelp").on("click",function(e){return e.preventDefault(),alert("Resetting the timers will bring back any countdown timers to their starting position. This is useful to see how things look on your store to customers who have not had their timers expire yet."),!1})},_=function(){i.$panel.find("#feraAdminPanel--reset").on("click",function(e){return e.preventDefault(),t.app.trigger("timers.reset"),t.app.trigger("feeds.reset"),window.location.reload(),!1})},U=function(){i.$panel.find("#feraAdminPanel--goBackToAdmin").on("click",function(e){return e.preventDefault(),window.location=t.api.baseAppPath,!1})},C=function(){i.$panel.find("#feraAdminPanel--turnOff").on("click",function(){if(confirm("You can reactivate the storefront admin panel from your Fera account under the 'Store Settings' menu section.")){var e=window.location.toString();-1!==e.indexOf("fera_test")?-1!==(e=Fera.Util.updateURLParameter(e,"fera_test",0)).indexOf("test_mode")&&(e=Fera.Util.updateURLParameter(e,"test_mode",null)):e=Fera.Util.updateURLParameter(e,"fera_test",0),-1!==e.indexOf("fera_admin")?-1!==(e=Fera.Util.updateURLParameter(e,"fera_admin",0)).indexOf("admin_mode")&&(e=Fera.Util.updateURLParameter(e,"admin_mode",null)):e=Fera.Util.updateURLParameter(e,"fera_admin",0),window.location=e}})},O=function(){var e;o("#feraAdminPanelContainer").remove(),e=t.testMode?'<label class="fera-toggle-switch"><input type="checkbox" checked id="feraAdminPanel--toggleTestMode"><span class="fera-slider round"></span></label>':'<label class="fera-toggle-switch"><input type="checkbox" id="feraAdminPanel--toggleTestMode"><span class="fera-slider round"></span></label>';var a='<div><div class="fera-button-wrapper" id="feraAdminButton"><input class="fera-hidden-trigger" id="feraAdminPanelToggle" type="checkbox"><div class="fera-circle"><label class="fera-circle-label" for="feraAdminPanelToggle"><img src="'+t.api.baseCdnPath+'/img/branding/logo_icon.png" alt="Fera A.I. Admin Icon" /><div class="fera-button-label">Admin</div></label></div></div></div>',n='<div id="feraAdminPanelContainer"><div id="feraAdminPanel" class="fera-admin-panel"><div class="fera-admin-panel-header"><div class=fera-admin-panel-header-side></div><div class="fera-admin-panel-header-inner">Fera Admin Panel</div><div class="fera-admin-panel-header-side"><a href="#" id="feraAdminPanel--hide">Hide</a></div></div><div class="fera-admin-note"><strong>NOTE:</strong> Your customers will <b>not</b> see this panel or any admin buttons.</div><div class="fera-admin-option" id="feraToggleTestModeSection"><div>Test Mode<span class="fera-admin-panel-help" id="feraAdminPanel--testModeHelp">(?)</span> :</div>'+e+'</div><div class="fera-admin-option" id="feraNumContainersSection"><div>Fera Containers:<span class="fera-admin-panel-help" id="feraAdminPanel--numContainersHelp">(?)</span>:</div><span class="fera-admin-option-value" id="feraAdminPanel--numContainersValue">n/a</span></div><div class="fera-admin-option" id="feraTimeOnCurrentPageSection"><div>Time on Page<span class="fera-admin-panel-help" id="feraAdminPanel--timeOnCurrentPageHelp">(?)</span>:</div><span class="fera-admin-option-value" id="feraAdminPanel--timeOnCurrentPageValue">n/a</span></div><div class="fera-admin-option" id="feraInactiveTimeOnCurrentPageSection"><div>Inactive Time on Page<span class="fera-admin-panel-help" id="feraAdminPanel--inactiveTimeOnCurrentPageHelp">(?)</span>:</div><span class="fera-admin-option-value" id="feraAdminPanel--inactiveTimeOnCurrentPageValue">n/a</span></div><div class="fera-admin-option" id="feraSessionTimeSection"><div>Time On Site<span class="fera-admin-panel-help" id="feraAdminPanel--sessionTimeHelp">(?)</span>:</div><span class="fera-admin-option-value" id="feraAdminPanel--sessionTimeValue">n/a</span></div><div class="fera-admin-option" id="feraTimeSinceFirstSeenSection"><div>Time Since First Seen<span class="fera-admin-panel-help" id="feraAdminPanel--timeSinceFirstSeenHelp">(?)</span>:</div><span class="fera-admin-option-value" id="feraAdminPanel--timeSinceFirstSeenValue">n/a</span></div><div class="fera-admin-option" id="feraResetUserTimersSection"><div>Reset Time<span class="fera-admin-panel-help" id="feraAdminPanel--resetUserTimersHelp">(?)</span>:</div><div class="fera-reset-button" id="feraAdminPanel--resetUserTimers">Reset</div></div><div class="fera-admin-option" id="feraResetTimersSection"><div>Reset Cart Timers<span class="fera-admin-panel-help" id="feraAdminPanel--resetHelp">(?)</span>:</div><div class="fera-reset-button" id="feraAdminPanel--reset">Reset</div></div><div class="fera-admin-option" id="feraClearShownHistorySection"><div>Reset Social Proof Events<span class="fera-admin-panel-help" id="feraAdminPanel--clearShownHistoryHelp">(?)</span>:</div><div class="fera-reset-button" id="feraAdminPanel--clearShownHistory">Reset</div></div><div class="fera-admin-return"><a href="#" id="feraAdminPanel--goBackToAdmin">Go To Admin</a> <a href="#" id="feraAdminPanel--turnOff">Disable Admin Mode</a></div></div><style>'+M()+"</style>"+a+"</div>";o("body").append(n),i.$panel=o("#feraAdminPanel"),i.$panel.hide(),i.$toggleBtn=o("#feraAdminButton"),t.adminMode||i.$toggleBtn.hide()},M=function(){return'@keyframes radial-pulse{0%{box-shadow:0 0 0 0 rgba(0,0,0,.5)}to{box-shadow:0 0 0 30px transparent}}.fera-circle img,fera-button{-webkit-user-select:none;-ms-user-select:none}.fera-admin-panel{color:#1c1c1c;width:40%;min-width:450px;border-radius:0;position:fixed;z-index:999;font-size:12px;font-family:Helvetica,Arial,sans-serif!important}.fera-admin-panel-header-inner{margin:auto;font-size:18px;text-align:center;padding:5px 10px}.fera-admin-panel-header-side{top:0;bottom:0;padding:10px;font-weight:300;flex-shrink:0}.fera-admin-panel a{font-size:14px}.fera-admin-panel-logo{vertical-align:middle;width:18px;height:38px}.fera-admin-option{height:28px!important;margin:auto auto 12px;display:flex;flex-wrap:no-wrap;justify-content:space-between;font-size:14px;text-align:center}.fera-admin-option-value{flex-wrap:nowrap;font-weight:200;padding:2px 4px;margin-left:7px;border-bottom: 1px solid #c3c3c3;color:#404040;}.fera-admin-return{display:table;padding-top: 12px;width: 100%;}.fera-admin-return > a { display: table-cell !important;} .fera-admin-return > a:last-child {text-align: right !important;}.fera-admin-note{text-align:center;font-style:italic;font-weight:400;padding:10px; border: 1px solid #efefef;}@media (max-width:401px){.fera-admin-panel{display:none!important}}.fera-admin-panel-help{flex-wrap:nowrap;vertical-align:super;font-size:8px;margin-left:2px;text-decoration:none;cursor:pointer}.fera-admin-panel-help:hover{opacity:.7}.fera-toggle-switch{position:relative;display:inline-block;width:60px;height:28px}.fera-slider,.fera-slider:before{position:absolute;background-color:#fff;-webkit-transition:.4s;-ms-transition:.4s;transition:.4s}.fera-toggle-switch input{display:none}.fera-slider{cursor:pointer;top:0;right:0;box-shadow:0 1px 3px #969696 inset;left:0;bottom:0}.fera-slider:before{box-shadow:0 1px 3px #969696;content:"";height:24px;width:24px;left:2px;bottom:2px}.fera-reset-button{cursor:pointer;display:inline-block!important}.fera-button-wrapper,.fera-circle,.fera-circle-label{height:60px;width:60px}input:checked+.fera-slider{background-color:#00e640}input:focus+.fera-slider{box-shadow:0 1px 1px #969696}input:checked+.fera-slider:before{-webkit-transform:translateX(26px);-ms-transform:translateX(32px);transform:translateX(32px)}.fera-slider.round{border-radius:34px}.fera-slider.round:before{border-radius:50%}fera-button{user-select:none;border:0;outline:0}.fera-button-wrapper{z-index:100;position:fixed;bottom:100px;left:20px;top: initial !important;}.fera-circle{position:relative;padding:0;margin:0 auto;border-radius:50%;animation:radial-pulse 1.5s 1;transition:.2s;text-align:center;background-color:rgba(33,43,54,0.9);box-shadow:0 2px 2px 0 rgba(0,0,0,.2);}.fera-circle:active{-webkit-transform:scale(.9);-ms-transform:scale (.9);transform:scale(.9);box-shadow:0 2px 15px 0 rgba(0,0,0,.3)}.fera-circle:hover{cursor:pointer;background-color:#ff492a;box-shadow:0 8px 15px 0 rgba(0,0,0,.3)}.fera-hidden-trigger:checked~.fera-circle .fera-button-label{opacity: 0;}.fera-circle img{user-select:none;position:absolute;top:50%;left:50%;margin-left: -20px;margin-top: -16px; width: 40px;transition: .5s;filter: brightness(0%) invert(100%);}.fera-hidden-trigger{display:none!important}.fera-hidden-trigger:checked~.fera-circle img { filter: none; }.fera-button-label{position:absolute;left:8px;top:22px;font-weight:700;font-size:13px}.fera-admin-panel{box-shadow:1px -1px 4px 1px rgba(0,0,0,.2);left:80px;bottom:156px;top:inherit;background-color:#fff;padding:32px 54px;max-width:550px}.fera-admin-panel-header{display:table;width:100%}.fera-admin-panel a{color:#5b5bff!important;text-transform:uppercase;text-decoration:none!important;font-weight:400!important}.fera-button-label{text-transform:uppercase;text-shadow:-1px 0 #fff,0 1px #fff,1px 0 #fff,0 -1px #fff,-1px 0 #fff,0 1px #fff,1px 0 #fff,0 -1px #fff,-1px 0 #fff,0 1px #fff,1px 0 #fff,0 -1px #fff;color:#000}.fera-hidden-trigger:checked~.fera-circle{cursor:pointer;box-shadow:1px 4px 4px 1px rgba(0,0,0,.2);background-color:#fff;-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.fera-admin-panel a:hover{text-decoration:underline!important}.fera-reset-button{border-radius:1px;box-shadow:0 1px 2px #969696!important;padding:3px 18px;line-height:unset!important;text-transform:uppercase;background-color:#5b5bff!important;color:#fff}.fera-admin-note{border-top:none;border-bottom:none;background-color:#f9f9e7;font-size:12px;margin-bottom:12px}.fera-admin-panel-header-side{text-align:right;margin:0;vertical-align:middle;display:table-cell;width:50px}.fera-admin-option{width:100%}.fera-admin-panel-header-side:first-child{text-align:left}.fera-admin-panel-header-inner{vertical-align:middle;font-weight:400;display:table-cell} @media(max-width: 500px){ #feraAdminPanelContainer, #feraPreviewModeIndicator { display: none; }'};l()},Fera.AdminPreviewer=function(i){i=i||{};var n=Fera.Util.$(),e=function(){t(),a()},a=function(){var e=i.optionsParser.getPreviewId();if(e&&!isNaN(e)){var a=i.app.getContainerById(e);if(a)r(a);else try{var n="skill."+e+".create";i.app.on(n,r)}catch(t){i.logger.error(t)}}},r=function(e){if(e&&e.settings&&e.settings.integration_selector){var a=n(e.settings.integration_selector);a.length<1||Fera.Util.isScrolledIntoView(a)||Fera.Util.scrollToElement(a,400)}},t=function(){if(!window.performance||window.performance.navigation.type!=window.performance.navigation.TYPE_BACK_FORWARD)if(i.optionsParser.hasUrlFlag("ensure_loaded_cart")){var e=i.optionsParser.urlParams.sample_variant_id,a=i.optionsParser.urlParams.sample_product_id;e&&a?o(a,{variant_id:e}):Fera.logger.error("Expected sample variant and product in the params but didn't get one so couldn't ensure that the cart was loaded. Please contact the fera.ai support team if you see this message.",i.optionsParser.urlParams)}else s()},o=function(e,a){i.app.cart.addProductIfEmpty(e,a,{beforeAdd:function(){l("Ensuring non-empty cart.")},afterAdd:function(){var e=window.location.toString();setTimeout(function(){window.location=Fera.Util.updateURLParameter(e,"ensure_loaded_cart","0")},1e3)}})},s=function(){return!!i.optionsParser.hasUrlFlag("go_to_checkout")&&(n(window).on("load",function(){l("Redirecting to the checkout."),i.app.cart.startCheckout()}),!0)},l=function(e){i.app.adminPanel.showPreviewMessage(e);var a=0,n=setInterval(function(){if(1e4<a)return console.error("Something may have gone wrong - did redirect when we should have."),clearInterval(n),void i.app.adminPanel.showPreviewMessage("Something may have gone wrong. Contact the fera.ai support team for help!");e+=".",i.app.adminPanel.showPreviewMessage(e),a+=1e3},1e3)};e()};